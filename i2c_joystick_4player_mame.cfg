# I2C Joystick Configuration - 4 Player MAME/JTCORES Compatible
# Complete 4-player arcade setup based on JTCORES PS2 scan codes
# Place this file at: /media/fat/config/i2c_joystick.cfg

# ============================================================================
# PLAYER 1 - ARROW KEYS + CTRL/ALT/SPACE/SHIFT
# ============================================================================
# MCP23017 at I2C address 0x20
EXPANDER 0x20 1

# Joystick Directions (Port A: pins 0-3)
MAP 0 0 0x75 1   # GPA0 -> Up Arrow    (Joy1 Up)
MAP 0 1 0x72 1   # GPA1 -> Down Arrow  (Joy1 Down)
MAP 0 2 0x6B 1   # GPA2 -> Left Arrow  (Joy1 Left)
MAP 0 3 0x74 1   # GPA3 -> Right Arrow (Joy1 Right)

# Action Buttons (Port A: pins 4-7)
MAP 0 4 0x14 1   # GPA4 -> Left Ctrl   (Joy1 Button1)
MAP 0 5 0x11 1   # GPA5 -> Left Alt    (Joy1 Button2)
MAP 0 6 0x29 1   # GPA6 -> Space       (Joy1 Button3)
MAP 0 7 0x12 1   # GPA7 -> Left Shift  (Joy1 Button4)

# Extra Buttons (Port B: pins 8-9)
MAP 0 8 0x1A 1   # GPB0 -> Z           (Joy1 Button5)
MAP 0 9 0x22 1   # GPB1 -> X           (Joy1 Button6)

# ============================================================================
# PLAYER 2 - R/F/D/G + A/S/Q/W/E
# ============================================================================
# MCP23017 at I2C address 0x21
EXPANDER 0x21 1

# Joystick Directions (Port A: pins 0-3)
MAP 1 0 0x2D 1   # GPA0 -> R           (Joy2 Up)
MAP 1 1 0x2B 1   # GPA1 -> F           (Joy2 Down)
MAP 1 2 0x23 1   # GPA2 -> D           (Joy2 Left)
MAP 1 3 0x34 1   # GPA3 -> G           (Joy2 Right)

# Action Buttons (Port A: pins 4-7)
MAP 1 4 0x1C 1   # GPA4 -> A           (Joy2 Button1)
MAP 1 5 0x1B 1   # GPA5 -> S           (Joy2 Button2)
MAP 1 6 0x15 1   # GPA6 -> Q           (Joy2 Button3)
MAP 1 7 0x1D 1   # GPA7 -> W           (Joy2 Button4)

# Extra Button (Port B: pin 8)
MAP 1 8 0x24 1   # GPB0 -> E           (Joy2 Button5)

# ============================================================================
# PLAYER 3 - I/K/J/L + RETURN/RSHIFT/RCTRL
# ============================================================================
# MCP23017 at I2C address 0x22
EXPANDER 0x22 1

# Joystick Directions (Port A: pins 0-3)
MAP 2 0 0x43 1   # GPA0 -> I           (Joy3 Up)
MAP 2 1 0x42 1   # GPA1 -> K           (Joy3 Down)
MAP 2 2 0x3B 1   # GPA2 -> J           (Joy3 Left)
MAP 2 3 0x4B 1   # GPA3 -> L           (Joy3 Right)

# Action Buttons (Port A: pins 4-6)
MAP 2 4 0x1A 1   # GPA4 -> Right Ctrl  (Joy3 Button1) - NOTE: Using Z as substitute
MAP 2 5 0x59 1   # GPA5 -> Right Shift (Joy3 Button2)
MAP 2 6 0x5A 1   # GPA6 -> Return      (Joy3 Button3)

# ============================================================================
# PLAYER 4 - NUMPAD 8/2/4/6 + NUMPAD 0/ENTER/PLUS
# ============================================================================
# MCP23017 at I2C address 0x23
EXPANDER 0x23 1

# Joystick Directions (Port A: pins 0-3)
# Note: These use the same codes as Player 1 - this appears to be a limitation
# in the JTCORES decoder where Player 4 shares arrow key mappings
MAP 3 0 0x75 1   # GPA0 -> Up Arrow    (Joy4 Up - shared with P1)
MAP 3 1 0x72 1   # GPA1 -> Down Arrow  (Joy4 Down - shared with P1)
MAP 3 2 0x6B 1   # GPA2 -> Left Arrow  (Joy4 Left - shared with P1)
MAP 3 3 0x74 1   # GPA3 -> Right Arrow (Joy4 Right - shared with P1)

# Alternative mapping using numpad (if cores support numpad codes):
# MAP 3 0 0x6C 1   # GPA0 -> Numpad 7    (Joy4 Up Alt)
# MAP 3 1 0x69 1   # GPA1 -> Numpad 1    (Joy4 Down Alt)
# MAP 3 2 0x6B 1   # GPA2 -> Numpad 4    (Joy4 Left Alt)
# MAP 3 3 0x74 1   # GPA3 -> Numpad 6    (Joy4 Right Alt)

# Action Buttons (Port A: pins 4-6)
MAP 3 4 0x70 1   # GPA4 -> Numpad 0    (Joy4 Button1)
MAP 3 5 0x5A 1   # GPA5 -> Numpad Enter(Joy4 Button2)
MAP 3 6 0x79 1   # GPA6 -> Numpad +    (Joy4 Button3)

# ============================================================================
# SYSTEM/CABINET CONTROLS (Optional - can use remaining pins)
# ============================================================================

# Coin/Service Controls (Player 3 expander, Port B: pins 8-11)
MAP 2 8 0x16 1   # GPB0 -> 1           (Coin 1)
MAP 2 9 0x1E 1   # GPB1 -> 2           (Coin 2)
MAP 2 10 0x26 1  # GPB2 -> 3           (Coin 3)
MAP 2 11 0x25 1  # GPB3 -> 4           (Coin 4)

# System Controls (Player 4 expander, Port B: pins 8-11)
MAP 3 8 0x46 1   # GPB0 -> 9           (Service)
MAP 3 9 0x06 1   # GPB1 -> F2          (Test)
MAP 3 10 0x04 1  # GPB2 -> F3          (Reset)
MAP 3 11 0x4D 1  # GPB3 -> P           (Pause)

# ============================================================================
# COMPLETE 4-PLAYER SCAN CODE REFERENCE
# ============================================================================

# PLAYER 1 (Standard Arcade)
# Directions: Up=0x75, Down=0x72, Left=0x6B, Right=0x74
# Buttons: Ctrl=0x14, Alt=0x11, Space=0x29, LShift=0x12, Z=0x1A, X=0x22

# PLAYER 2 (WASD Style)  
# Directions: R=0x2D, F=0x2B, D=0x23, G=0x34
# Buttons: A=0x1C, S=0x1B, Q=0x15, W=0x1D, E=0x24

# PLAYER 3 (IJKL Style)
# Directions: I=0x43, K=0x42, J=0x3B, L=0x4B  
# Buttons: RCtrl=0x1A*, RShift=0x59, Return=0x5A
# *Note: Using Z (0x1A) as RCtrl substitute due to scan code limitations

# PLAYER 4 (Numpad/Arrow Share)
# Directions: Up=0x75, Down=0x72, Left=0x6B, Right=0x74 (shared with P1)
# Buttons: Numpad0=0x70, NumEnter=0x5A, NumPlus=0x79

# SYSTEM CONTROLS
# Coins: 1=0x16, 2=0x1E, 3=0x26, 4=0x25
# System: Service=0x46, Test=0x06, Reset=0x04, Pause=0x4D

# ============================================================================
# HARDWARE SETUP NOTES
# ============================================================================
#
# 4-Player Setup Requires:
# - 4x MCP23017 I2C expanders (addresses 0x20-0x23)
# - Each expander provides 16 inputs (enough for 1 complete joystick + extras)
# - Total of 64 possible button inputs across all 4 players
#
# I2C Address Configuration:
# Player 1: 0x20 (A2=0, A1=0, A0=0)
# Player 2: 0x21 (A2=0, A1=0, A0=1) 
# Player 3: 0x22 (A2=0, A1=1, A0=0)
# Player 4: 0x23 (A2=0, A1=1, A0=1)
#
# IMPORTANT LIMITATION:
# Player 4 shares directional scan codes with Player 1 in the JTCORES decoder.
# This means Player 1 and Player 4 cannot be used simultaneously for directional
# controls. This is a hardware limitation of the PS2 scan code mapping.
#
# Workaround Options:
# 1. Use Players 1, 2, 3 only for true 3-player games
# 2. Use alternate control schemes (e.g., numpad for Player 4 if supported)
# 3. Modify the core's input mapping to use different scan codes
#
# ============================================================================
# COMPATIBLE GAMES
# ============================================================================
#
# This 4-player configuration works with:
# - MAME 4-player arcade games (Gauntlet, Simpsons, TMNT, etc.)
# - JTCORES 4-player implementations
# - Games that support keyboard controls for multiple players
# - Custom arcade cabinet setups
#
# Note: Game compatibility depends on the specific core's input implementation
# and whether it recognizes the scan codes for 3rd and 4th players.
#
# ============================================================================