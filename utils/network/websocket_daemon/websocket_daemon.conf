# MiSTer WebSocket Daemon Configuration
#
# Real-time bidirectional communication server
#

# Server settings
port=8081
bind_address=0.0.0.0

# CORS settings for web browsers
enable_cors=true

# Authentication (optional)
enable_auth=false
auth_token=

# Forward game announcements to WebSocket clients
forward_announcements=true

# Maximum concurrent clients
max_clients=10

# Ping interval in seconds
ping_interval=30

# WebSocket Protocol:
#
# Client -> Server messages:
# {
#   "type": "launch",
#   "core": "PSX",
#   "id_type": "serial", 
#   "identifier": "SLUS-00067"
# }
#
# {
#   "type": "command",
#   "action": "random_favorite"
# }
#
# {
#   "type": "ping"
# }
#
# Server -> Client messages:
# {
#   "type": "announcement",
#   "data": "GAME_CHANGED PSX \"Castlevania SOTN\" \"/games/psx/castlevania.chd\""
# }
#
# {
#   "type": "response",
#   "status": "success|error",
#   "message": "Description"
# }
#
# {
#   "type": "pong"
# }
#
# Usage Examples:
#
# JavaScript client:
# const ws = new WebSocket('ws://mister-ip:8081');
# ws.onmessage = (event) => {
#   const data = JSON.parse(event.data);
#   console.log('Received:', data);
# };
# ws.send(JSON.stringify({
#   type: 'launch',
#   core: 'PSX',
#   id_type: 'serial',
#   identifier: 'SLUS-00067'
# }));
#
# Python client:
# import websocket
# import json
# 
# def on_message(ws, message):
#     data = json.loads(message)
#     print(f"Received: {data}")
# 
# ws = websocket.WebSocketApp("ws://mister-ip:8081",
#                           on_message=on_message)
# ws.send(json.dumps({
#     'type': 'launch',
#     'core': 'PSX', 
#     'id_type': 'serial',
#     'identifier': 'SLUS-00067'
# }))
# ws.run_forever()